
## 27 October 2024
Flex diagramming -- Generate css files for diagram methods.   

### Rationale
Tidy up alongside of implementing new even-odd fill colours (see change log 28-Oct-2024).

### Summary
The idea is that css files should be generated from the shape styles and text styles that are in the diagram model.
Need to generate the file eraFlexDiagramming.css.

### Analysis

1. Currently I have three source files in the era method xml folder 
   + text_style_definitions.xml
   + shape_style_definitions.xml
   + endline_definitions.xml
2. In flex diagrams generated by ERmodel2.flex.xslt I have
```
   <include>
      <filename>file:///C:/Users/John/Documents/Cloudwork/BuildArea/ERScript/scripts/../flexDiagramming/methods/era/xml/text_style_definitions.xml</filename>
   </include>
   <include>
      <filename>file:///C:/Users/John/Documents/Cloudwork/BuildArea/ERScript/scripts/../flexDiagramming/methods/era/xml/shape_style_definitions.xml</filename>
   </include>
   <include>
      <filename>file:///C:/Users/John/Documents/Cloudwork/BuildArea/ERScript/scripts/../flexDiagramming/methods/era/xml/endline_style_definitions.xml</filename>
   </include>
```
3. Not so straightforward because we need to cater for hover styles and routehitareas.
   + ideally hover styles would be modelled in flex ER model but this is more work so don't do this
   + just throw the routehit area stuff in for free without modelling the styles.xml 
     (rationale being that, for the time being at least, they are generic to any flex model.)

### Proposal
1. new build.ps1 in era/xml folder.
2. new script styles2css.ps1 in flexDiagramming/scripts
   + script translates simply from xml to css but, in addition, unconditionally throws out routehitarea styles (see ratioanle above)
3. new transform styles2.css.xslt in flexDiagramming.xslt
4. merge three xml files in era/xml into a single file 'eraFlexStyleDefinitions.xml'
   + add hover styles into this 'eraFlexStyleDefinitions.xml' file (these not currently modelled in xml) 
5. generate the css file now named 'eraFlexStyleDefinitions.css'
6. modify flex2.svg.xslt to plant link to this 'eraFlexStyleDefinitions.css' file in place of 'eraFlexDiagramming.css'.
7. Remove the folder css and the file 'eraFlexDiagramming.svg.css' from the methods/era folder. 

Do the same again for the test method:
1. new build.ps1 in test/xml folder.
4. merge three xml files in era/xml into a single file 'testFlexStyleDefinitions.xml'
   + add hover styles into this 'testFlexStyleDefinitions.xml' file (these not currently modelled in xml) 
7. Remove the folder css and the file 'testFlexDiagramming.svg.css' from the methods/era folder. 

### Testing
1. Do a clean rebuild of css.
2. Rebuild and exercise the examples in examplesSelected.
3. Rebuild and test the examples in test.

### Completion Date
4 November 2024

